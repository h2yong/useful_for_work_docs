---
title: 边界值分析
description: 边界值分析法就是对输入或输出的边界值进行测试的一种黑盒测试方法
keywords:
  [
    边界值,
    边界值分析,
    测试用例,
    测试用例设计,
    黑盒测试,
    基础测试用例设计,
    等价类划分法补充,
    健壮性测试,
    最坏情况测试,
    健壮性最坏情况测试,
  ]
---

import ReactECharts from "echarts-for-react";

# 边界值分析

## 定义

边界值分析法就是对输入或输出的边界值进行测试的一种黑盒测试方法。通常边界值分析法是作为对等价类划分法的补充，这种情况下，其测试用例来自等价类的边界。

## 为什么使用该方法

- 等价类划分忽略掉了某些特定类型的高效测试用例，而边界值分析可以弥补其中的很多不足；
- 根据大量的测试统计数据，编程的很多错误是发生在输入定义域或输出值域的边界上，而不是发生在输入/输出范围的中间区域。因此针对输入和输出等价类的边界情况设计测试用例，可以查出更多的错误，具有更高的测试回报率；
- 边界值数据本质上是属于某个等价类的范围，测试时确实是一种冗余（重复），但是为了更好的测试质量（边界值特别容易出bug），边界值必须要单独测，适当的冗余是可以接受的。

## 设计思路

1. 如果输入条件定义了数值区间[a,b]，那么测试用例应包括a、b、稍微比a大、稍微比b大、稍微比a小和稍微比b小等几种情况。
   > **举例**
   > 程序的规格说明中规定："重量在10公斤至50公斤范围内的包裹，其邮费计算公式为…"。  
   > 作为测试用例，我们应取10及50，还应取10.01、50.01、9.99及49.99等。
2. 如果输入条件规定了值的个数, 那么最小个数、最大个数、大于和小于最小值、大于和小于最大值都应该被测试。
   > **举例**
   > 程序的规格说明中规定："邮箱可以存放1~255个邮件"。  
   > 作为测试用例，测试用例可取1和255，还应取0及256等。
3. 将思路1和思路应用于输出条件，即设计测试用例使输出值达到边界值及其左右的值。
4. 如果程序的规格说明给出的输入域或输出域是有序集合，则应选取集合的第一个元素和最后一个元素作为测试用例。
5. 如果在程序中的数据结构有指定的边界，那么选择这个数据结构边界上的值作为测试用例。
6. 分析规格说明，找出其它可能的边界条件。

> Tips：边界值分析方法和等价类划分之间的重要区别是，**边界值分析考察正处于等价划分边界或在边界附近的状态**。

## 根据测试用例的完整性划分

**单缺陷假设与多缺陷假设：**  
**单缺陷假设**是边界值分析的关键假设。单缺陷假设指“失效极少是由两个或两个以上的缺陷同时发生引起的”。在边界值分析中，单缺陷假设即选取测试用例时仅仅使得一个变量取极值，其他变量均取正常值。  
**多缺陷假设**则是指“失效是由两个或两个以上缺陷同时作用引起的”，要求在选取测试用例时同时让多个变量取极值。

几种边界值分析法模型：一般性边界值测试、健壮性测试、最坏情况测试、健壮性最坏情况测试。

:::info 例子
函数 y = f(x1,x2) 输入变量的取值范围分别为：x1 ∈ [10,40], x2 ∈ [50,70]。
:::

### 一般性边界值测试

有n个输入变量，设计测试用例使得一个变量在数据有效区域内取最大值、略小于最大值、正常值、略大于最小值和最小值。

export const options = {
  xAxis: {
    name: "X1",
    min: 0,
    max: 50,
  },
  yAxis: {
    name: "X2",
    min: 40,
    max: 80,
  },
  series: [
    {
      symbolSize: 20,
      areaStyle: {
        normal: {
          color: "#8cd5c2",
        },
      },
      data: [
        [30, 70],
        [30, 67],
        [30, 60],
        [30, 52],
        [30, 50],
        [10, 60],
        [11, 60],
        [39, 60],
        [40, 60],
      ],
      type: "scatter",
    },
  ],
};

export const Func1 = () => <ReactECharts option={options} />;

<Func1 />

对于有n个输入变量的程序，一般性边界值分析的测试用例个数为**4n+1**。

一般性边界值分析采用了可靠性理论的单缺陷假设。  
**优点**：简便易行；生成测试数据的成本很低；  
**局限性**：测试用例不充分；不能发现测试变量之间的依赖关系；  
**结论**：只能作为初步测试用例使用。

### 健壮性测试

健壮性是指在异常情况下，软件还能正常运行的能力。健壮性考虑的主要部分是预期输出，而不是输入。健壮性测试是边界值分析的一种简单扩展。除了变量的5 个边界分析取值还要考虑略超过最大值（max）和略小于最小值（min）时的情况。健壮性测试的最大价值在于观察处理异常情况，它是检测软件系统容错性的重要手段。如下图所示。

> PS：软件容错性的度量：从非法输入中恢复；健壮性有两层含义：容错能力和恢复能力。

export const options2 = {
  xAxis: {
    name: "X1",
    min: 0,
    max: 50,
  },
  yAxis: {
    name: "X2",
    min: 40,
    max: 80,
  },
  series: [
    {
      symbolSize: 20,
      areaStyle: {
        normal: {
          color: "#8cd5c2",
        },
      },
      data: [
        [30, 72],
        [30, 70],
        [30, 67],
        [30, 60],
        [30, 52],
        [30, 50],
        [30, 48],
        [9, 60],
        [10, 60],
        [11, 60],
        [39, 60],
        [40, 60],
        [41, 60],
      ],
      type: "scatter",
    },
  ],
};

export const Func2 = () => <ReactECharts option={options2} />;

<Func2 />

对于有n个输入变量的程序，健壮性测试的测试用例个数为**6n+1**。

### 最坏情况测试

最坏情况测试拒绝单缺陷假设，它关心的是当多个变量取极值时出现的情况。最坏情况测试中，对每一个输入变量首先进行包含最小值、略高于最小值、正常值、略低于最大值、最大值等5个元素集合的测试，然后对这些集合进行笛卡尔积计算，以生成测试用例。最坏情况测试将意味着更大工作量。如下图所示。

export const options3 = {
  xAxis: {
    name: "X1",
    min: 0,
    max: 50,
  },
  yAxis: {
    name: "X2",
    min: 40,
    max: 80,
  },
  series: [
    {
      symbolSize: 20,
      areaStyle: {
        normal: {
          color: "#8cd5c2",
        },
      },
      data: [
        [10, 50],
        [10, 51],
        [10, 60],
        [10, 69],
        [10, 70],
        [11, 50],
        [11, 51],
        [11, 60],
        [11, 69],
        [11, 70],
        [30, 50],
        [30, 51],
        [30, 60],
        [30, 69],
        [30, 70],
        [39, 50],
        [39, 51],
        [39, 60],
        [39, 69],
        [39, 70],
        [40, 50],
        [40, 51],
        [40, 60],
        [40, 69],
        [40, 70],
      ],
      type: "scatter",
    },
  ],
};

export const Func3 = () => <ReactECharts option={options3} />;

<Func3 />

对于有n个输入变量的程序，最坏情况测试的测试用例个数为5^n。

最坏情况与基本边界值分析的比较：

- 基本边界值分析测试用例是最坏情况测试用例的真子集；
- 最坏情况测试显然更彻底；
- 最坏情况测试工作量大得多，变量函数的最坏情况测试会产生5的n次方个测试用例，边界值分析只产生4n+1个测试用例。

### 健壮性最坏情况测试

健壮性最坏情况假设对每一个变量首先进行最小值、略小于最小值的值、略高于最小值的值、正常值、最大值、略高于最大值的值、略低于最大值的值等7个元素的集合。然后对这些集合进行笛卡尔积运算，以生成测试用例。如下图所示。

export const options4 = {
  xAxis: {
    name: "X1",
    min: 0,
    max: 50,
  },
  yAxis: {
    name: "X2",
    min: 40,
    max: 80,
  },
  series: [
    {
      symbolSize: 20,
      areaStyle: {
        normal: {
          color: "#8cd5c2",
        },
      },
      data: [
        [9, 48],
        [9, 50],
        [9, 52],
        [9, 60],
        [9, 68],
        [9, 70],
        [9, 72],
        [10, 48],
        [10, 50],
        [10, 52],
        [10, 60],
        [10, 68],
        [10, 70],
        [10, 72],
        [11, 48],
        [11, 50],
        [11, 52],
        [11, 60],
        [11, 68],
        [11, 70],
        [11, 72],
        [30, 48],
        [30, 50],
        [30, 52],
        [30, 60],
        [30, 68],
        [30, 70],
        [30, 72],
        [49, 48],
        [49, 50],
        [49, 52],
        [49, 60],
        [49, 68],
        [49, 70],
        [49, 72],
        [50, 48],
        [50, 50],
        [50, 52],
        [50, 60],
        [50, 68],
        [50, 70],
        [50, 72],
        [51, 48],
        [51, 50],
        [51, 52],
        [51, 60],
        [51, 68],
        [51, 70],
        [51, 72],
      ],
      type: "scatter",
    },
  ],
};

export const Func4 = () => <ReactECharts option={options4} />;

<Func4 />

对于有n个输入变量的程序，健壮最坏情况测试的测试用例个数为7^n。

## 边界的分类

- 边界条件：可以在产品说明书中有定义或者在使用软件过程中确定；
- 内部边界条件：在软件内部，也称为内部边界条件；

  - 数值的边界值检验：计算机是基于二进制进行工作的，因此，软件的任何数值运算都有一定的范围限制。

    | 项         | 范围或值                          |
    | :--------- | :-------------------------------- |
    | 位(bit)    | 0或1                              |
    | 字节(byte) | 0~255                             |
    | 字(word)   | 0~65535(单字)或0~4294967295(双字) |
    | 千(K)      | 1024                              |
    | 兆(M)      | 1048576(1024\*1024)               |
    | 吉(G)      | 1073741824(1024\*1024\*1024)      |

  - 字符的边界值检验：在计算机软件中，字符也是很重要的表示元素，其中ASCII和Unicode是常见的编码方式。如下列出了一些常用字符对应的ASCII码值。

    | 字符         | ASCII码值 |
    | :----------- | :-------- |
    | 空 (null)    | 0         |
    | 空格 (space) | 32        |
    | 可输入的字符 | 33~126    |
    | 0~9          | 48~57     |
    | A~Z          | 65~90     |
    | a~z          | 97~122    |

- 其他边界条件：如输入信息为空、非法、错误、不正确和垃圾数据。

## 使用场景

有数据输入且存在取值边界或长度边界时，一般可以使用边界值法。边界值法往往跟等价类划分法一起使用，从而形成一套较为完善的测试方案。

## 实战演练

:::tip 实战例子1
某选课系统中规定每门课程的选修人数在[20，60]之间，小于20人不开设该门选修课，大于60人不接受后面的选课要求。  
**输入变量**：选课人数
:::

**测试用例**：
选择当选课人数分别为19，20，21, 59，60和61等几个边界点
再加上一个正常值点40

## 参考文档

- https://zhuanlan.zhihu.com/p/121133074
- 《软件测试的艺术》
